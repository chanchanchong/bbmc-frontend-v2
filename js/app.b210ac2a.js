(()=>{"use strict";var t={8679:(t,e,n)=>{n(6992),n(8674),n(9601),n(7727);var r=n(5010),s=n(3396),o=n(7139),a={id:"wrapper"},i={class:"navbar is-dark"},u={class:"navbar-brand"},c=(0,s._)("strong",null,"BBMC",-1),l=(0,s._)("span",{"aria-hidden":"true"},null,-1),d=(0,s._)("span",{"aria-hidden":"true"},null,-1),m=(0,s._)("span",{"aria-hidden":"true"},null,-1),p=[l,d,m],h=(0,s._)("div",{class:"navbar-start"},[(0,s._)("div",{class:"navbar-item"},[(0,s._)("form",{method:"get",action:"/search"},[(0,s._)("div",{class:"field has-addons"},[(0,s._)("div",{class:"control"},[(0,s._)("input",{type:"text",class:"input",placeholder:"What are you looking for?",name:"query"})]),(0,s._)("div",{class:"control"},[(0,s._)("button",{class:"button is-success"},[(0,s._)("span",{class:"icon"},[(0,s._)("i",{class:"fas fa-search"})])])])])])])],-1),f={class:"navbar-end"},g=(0,s.Uk)("Electrical"),_=(0,s.Uk)("Paint"),v={class:"navbar-item"},w={class:"buttons"},y=(0,s.Uk)("My account"),b=(0,s.Uk)("Log in"),k=(0,s._)("span",{class:"icon"},[(0,s._)("i",{class:"fas fa-shopping-cart"})],-1),C=(0,s._)("div",{class:"lds-dual-ring"},null,-1),S=[C],T={class:"section"},x=(0,s._)("footer",{class:"footer"},[(0,s._)("p",{class:"has-text-centered"},"Copyright (c) 2021")],-1);function q(t,e,n,r,l,d){var m=(0,s.up)("router-link"),C=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("nav",i,[(0,s._)("div",u,[(0,s.Wm)(m,{to:"/",class:"navbar-item"},{default:(0,s.w5)((function(){return[c]})),_:1}),(0,s._)("a",{class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-menu",onClick:e[0]||(e[0]=function(t){return l.showMobileMenu=!l.showMobileMenu})},p)]),(0,s._)("div",{class:(0,o.C_)(["navbar-menu",{"is-active":l.showMobileMenu}]),id:"navbar-menu"},[h,(0,s._)("div",f,[(0,s.Wm)(m,{to:"/electrical",class:"navbar-item"},{default:(0,s.w5)((function(){return[g]})),_:1}),(0,s.Wm)(m,{to:"/paint",class:"navbar-item"},{default:(0,s.w5)((function(){return[_]})),_:1}),(0,s._)("div",v,[(0,s._)("div",w,[t.$store.state.isAuthenticated?((0,s.wg)(),(0,s.j4)(m,{key:0,to:"/my-account",class:"button is-light"},{default:(0,s.w5)((function(){return[y]})),_:1})):((0,s.wg)(),(0,s.j4)(m,{key:1,to:"/log-in",class:"button is-light"},{default:(0,s.w5)((function(){return[b]})),_:1})),(0,s.Wm)(m,{to:"/cart",class:"button is-success"},{default:(0,s.w5)((function(){return[k,(0,s._)("span",null,"Cart ("+(0,o.zw)(d.cartTotalLength)+")",1)]})),_:1})])])])],2)]),(0,s._)("div",{class:(0,o.C_)(["is-loading-bar has-text-centered",{"is-loading":t.$store.state.isLoading}])},S,2),(0,s._)("section",T,[(0,s.Wm)(C)]),x])}var z=n(6265),I=n.n(z);const P={data:function(){return{showMobileMenu:!1,cart:{items:[]}}},beforeCreate:function(){this.$store.commit("initializeStore");var t=this.$store.state.token;I().defaults.headers.common.Authorization=t?"Token "+t:""},mounted:function(){this.cart=this.$store.state.cart},computed:{cartTotalLength:function(){for(var t=0,e=0;e<this.cart.items.length;e++)t+=this.cart.items[e].quantity;return t}}};var L=n(89);const O=(0,L.Z)(P,[["render",q]]),$=O;n(1539),n(8783),n(3948),n(5212);var D=n(2483),Z=(n(8862),n(7327),n(1058),n(7658),n(65));const U=(0,Z.MT)({state:{cart:{items:[]},isAuthenticated:!1,token:"",isLoading:!1},mutations:{initializeStore:function(t){localStorage.getItem("cart")?t.cart=JSON.parse(localStorage.getItem("cart")):localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.getItem("token")?(t.token=localStorage.getItem("token"),t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},addToCart:function(t,e){var n=t.cart.items.filter((function(t){return t.product.id===e.product.id}));n.length?n[0].quantity=parseInt(n[0].quantity)+parseInt(e.quantity):t.cart.items.push(e),localStorage.setItem("cart",JSON.stringify(t.cart))},setIsLoading:function(t,e){t.isLoading=e},setToken:function(t,e){t.token=e,t.isAuthenticated=!0},removeToken:function(t){t.token="",t.isAuthenticated=!1},clearCart:function(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart))}},actions:{},modules:{}});var M={class:"home"},B=(0,s._)("section",{class:"hero is-medium is-dark mb-6"},[(0,s._)("div",{class:"hero-body has-text-centered"},[(0,s._)("p",{class:"title mb-6"}," Welcome to BBMC ")])],-1),F={class:"columns is-multiline"},j=(0,s._)("div",{class:"column is-12"},[(0,s._)("h2",{class:"is-size-2 has-text-centered"},"Latest products")],-1);function A(t,e,n,r,o,a){var i=(0,s.up)("ProductBox");return(0,s.wg)(),(0,s.iD)("div",M,[B,(0,s._)("div",F,[j,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.latestProducts,(function(t){return(0,s.wg)(),(0,s.j4)(i,{key:t.id,product:t},null,8,["product"])})),128))])])}var H=n(124),V=n(8534),Y=(n(8309),{class:"column is-3"}),E={class:"box"},K={class:"image mb-4"},N=["src"],W={class:"is-size-4"},J={class:"is-size-6 has-text-grey"},Q=(0,s.Uk)("View details");function R(t,e,n,r,a,i){var u=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Y,[(0,s._)("div",E,[(0,s._)("figure",K,[(0,s._)("img",{src:n.product.get_thumbnail},null,8,N)]),(0,s._)("h3",W,(0,o.zw)(n.product.name),1),(0,s._)("p",J,"₱"+(0,o.zw)(n.product.price),1),(0,s.Wm)(u,{to:n.product.get_absolute_url,class:"button is-dark mt-4"},{default:(0,s.w5)((function(){return[Q]})),_:1},8,["to"])])])}const G={name:"ProductBox",props:{product:Object}},X=(0,L.Z)(G,[["render",R],["__scopeId","data-v-b40155e6"]]),tt=X,et={name:"Home",data:function(){return{latestProducts:[]}},components:{ProductBox:tt},mounted:function(){this.getLatestProducts(),document.title="Home | BBMC"},methods:{getLatestProducts:function(){var t=this;return(0,V.Z)((0,H.Z)().mark((function e(){return(0,H.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),e.next=3,I().get("/api/v1/latest-products/").then((function(e){t.latestProducts=e.data}))["catch"]((function(t){console.log(t)}));case 3:t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}},nt=(0,L.Z)(et,[["render",A]]),rt=nt;n(2526),n(1817);var st={class:"page-product"},ot={class:"columns is-multiline"},at={class:"column is-9"},it={class:"image mb-6"},ut=["src"],ct={class:"title"},lt={class:"column is-3"},dt=(0,s._)("h2",{class:"subtitle"},"Information",-1),mt=(0,s._)("strong",null,"Price: ",-1),pt={class:"field has-addons mt-6"},ht={class:"control"},ft={class:"control"};function gt(t,e,n,a,i,u){return(0,s.wg)(),(0,s.iD)("div",st,[(0,s._)("div",ot,[(0,s._)("div",at,[(0,s._)("figure",it,[(0,s._)("img",{src:i.product.get_image},null,8,ut)]),(0,s._)("h1",ct,(0,o.zw)(i.product.name),1),(0,s._)("p",null,(0,o.zw)(i.product.description),1)]),(0,s._)("div",lt,[dt,(0,s._)("p",null,[mt,(0,s.Uk)("₱"+(0,o.zw)(i.product.price),1)]),(0,s._)("div",pt,[(0,s._)("div",ht,[(0,s.wy)((0,s._)("input",{type:"number",class:"input",min:"1","onUpdate:modelValue":e[0]||(e[0]=function(t){return i.quantity=t})},null,512),[[r.nr,i.quantity]])]),(0,s._)("div",ft,[(0,s._)("a",{class:"button is-dark",onClick:e[1]||(e[1]=function(t){return u.addToCart()})},"Add to cart")])])])])])}n(2222);var _t=n(5597);const vt={name:"Product",data:function(){return{product:{},quantity:1}},mounted:function(){this.getProduct()},methods:{getProduct:function(){var t=this;return(0,V.Z)((0,H.Z)().mark((function e(){var n,r;return(0,H.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),n=t.$route.params.category_slug,r=t.$route.params.product_slug,e.next=5,I().get("/api/v1/products/".concat(n,"/").concat(r)).then((function(e){t.product=e.data,document.title=t.product.name+" | BBMC"}))["catch"]((function(t){console.log(t)}));case 5:t.$store.commit("setIsLoading",!1);case 6:case"end":return e.stop()}}),e)})))()},addToCart:function(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);var t={product:this.product,quantity:this.quantity};this.$store.commit("addToCart",t),(0,_t.toast)({message:"The product was added to the cart",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})}}},wt=(0,L.Z)(vt,[["render",gt]]),yt=wt;var bt={class:"page-category"},kt={class:"columns is-multiline"},Ct={class:"column is-12"},St={class:"is-size-2 has-text-centered"};function Tt(t,e,n,r,a,i){var u=(0,s.up)("ProductBox");return(0,s.wg)(),(0,s.iD)("div",bt,[(0,s._)("div",kt,[(0,s._)("div",Ct,[(0,s._)("h2",St,(0,o.zw)(a.category.name),1)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.category.products,(function(t){return(0,s.wg)(),(0,s.j4)(u,{key:t.id,product:t},null,8,["product"])})),128))])])}const xt={name:"Category",components:{ProductBox:tt},data:function(){return{category:{products:[]}}},mounted:function(){this.getCategory()},watch:{$route:function(t,e){"Category"===t.name&&this.getCategory()}},methods:{getCategory:function(){var t=this;return(0,V.Z)((0,H.Z)().mark((function e(){var n;return(0,H.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.$route.params.category_slug,t.$store.commit("setIsLoading",!0),I().get("/api/v1/products/".concat(n,"/")).then((function(e){t.category=e.data,document.title=t.category.name+" | BBMC"}))["catch"]((function(t){console.log(t),(0,_t.toast)({message:"Something went wrong. Please try again.",type:"is-danger",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})})),t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}},qt=(0,L.Z)(xt,[["render",Tt]]),zt=qt;var It={class:"page-search"},Pt={class:"columns is-multiline"},Lt={class:"column is-12"},Ot=(0,s._)("h1",{class:"title"},"Search",-1),$t={class:"is-size-5 has-text-grey"};function Dt(t,e,n,r,a,i){var u=(0,s.up)("ProductBox");return(0,s.wg)(),(0,s.iD)("div",It,[(0,s._)("div",Pt,[(0,s._)("div",Lt,[Ot,(0,s._)("h2",$t,'Search term: "'+(0,o.zw)(a.query)+'"',1)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(function(t){return(0,s.wg)(),(0,s.j4)(u,{key:t.id,product:t},null,8,["product"])})),128))])])}n(4916),n(4765),n(1637);const Zt={name:"Search",components:{ProductBox:tt},data:function(){return{products:[],query:""}},mounted:function(){document.title="Search | BBMC";var t=window.location.search.substring(1),e=new URLSearchParams(t);e.get("query")&&(this.query=e.get("query"),this.performSearch())},methods:{performSearch:function(){var t=this;return(0,V.Z)((0,H.Z)().mark((function e(){return(0,H.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),e.next=3,I().post("/api/v1/products/search/",{query:t.query}).then((function(e){t.products=e.data}))["catch"]((function(t){console.log(t)}));case 3:t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}},Ut=(0,L.Z)(Zt,[["render",Dt]]),Mt=Ut;n(6977);var Bt={class:"page-cart"},Ft={class:"columns is-multiline"},jt=(0,s._)("div",{class:"column is-12"},[(0,s._)("h1",{class:"title"},"Cart")],-1),At={class:"column is-12 box"},Ht={key:0,class:"table is-fullwidth"},Vt=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Product"),(0,s._)("th",null,"Price"),(0,s._)("th",null,"Quantity"),(0,s._)("th",null,"Total"),(0,s._)("th")])],-1),Yt={key:1},Et={class:"column is-12 box"},Kt=(0,s._)("h2",{class:"subtitle"},"Summary",-1),Nt=(0,s._)("hr",null,null,-1),Wt=(0,s.Uk)("Proceed to checkout");function Jt(t,e,n,r,a,i){var u=(0,s.up)("CartItem"),c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Bt,[(0,s._)("div",Ft,[jt,(0,s._)("div",At,[i.cartTotalLength?((0,s.wg)(),(0,s.iD)("table",Ht,[Vt,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.cart.items,(function(t){return(0,s.wg)(),(0,s.j4)(u,{key:t.product.id,initialItem:t,onRemoveFromCart:i.removeFromCart},null,8,["initialItem","onRemoveFromCart"])})),128))])])):((0,s.wg)(),(0,s.iD)("p",Yt,"You don't have any products in your cart..."))]),(0,s._)("div",Et,[Kt,(0,s._)("strong",null,"$"+(0,o.zw)(i.cartTotalPrice.toFixed(2)),1),(0,s.Uk)(", "+(0,o.zw)(i.cartTotalLength)+" items ",1),Nt,(0,s.Wm)(c,{to:"/cart/checkout",class:"button is-dark"},{default:(0,s.w5)((function(){return[Wt]})),_:1})])])])}n(5827);function Qt(t,e,n,r,a,i){var u=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,[(0,s.Wm)(u,{to:a.item.product.get_absolute_url},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,o.zw)(a.item.product.name),1)]})),_:1},8,["to"])]),(0,s._)("td",null,"₱"+(0,o.zw)(a.item.product.price),1),(0,s._)("td",null,[(0,s.Uk)((0,o.zw)(a.item.quantity)+" ",1),(0,s._)("a",{onClick:e[0]||(e[0]=function(t){return i.decrementQuantity(a.item)})},"-"),(0,s._)("a",{onClick:e[1]||(e[1]=function(t){return i.incrementQuantity(a.item)})},"+")]),(0,s._)("td",null,"$"+(0,o.zw)(i.getItemTotal(a.item).toFixed(2)),1),(0,s._)("td",null,[(0,s._)("button",{class:"delete",onClick:e[2]||(e[2]=function(t){return i.removeFromCart(a.item)})})])])}const Rt={name:"CartItem",props:{initialItem:Object},data:function(){return{item:this.initialItem}},methods:{getItemTotal:function(t){return t.quantity*t.product.price},decrementQuantity:function(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity:function(t){t.quantity+=1,this.updateCart()},updateCart:function(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},removeFromCart:function(t){this.$emit("removeFromCart",t),this.updateCart()}}},Gt=(0,L.Z)(Rt,[["render",Qt]]),Xt=Gt,te={name:"Cart",components:{CartItem:Xt},data:function(){return{cart:{items:[]}}},mounted:function(){this.cart=this.$store.state.cart},methods:{removeFromCart:function(t){this.cart.items=this.cart.items.filter((function(e){return e.product.id!==t.product.id}))}},computed:{cartTotalLength:function(){return this.cart.items.reduce((function(t,e){return t+e.quantity}),0)},cartTotalPrice:function(){return this.cart.items.reduce((function(t,e){return t+e.product.price*e.quantity}),0)}}},ee=(0,L.Z)(te,[["render",Jt]]),ne=ee;var re={class:"page-sign-up"},se={class:"columns"},oe={class:"column is-4 is-offset-4"},ae=(0,s._)("h1",{class:"title"},"Sign up",-1),ie={class:"field"},ue=(0,s._)("label",null,"Username",-1),ce={class:"control"},le={class:"field"},de=(0,s._)("label",null,"Password",-1),me={class:"control"},pe={class:"field"},he=(0,s._)("label",null,"Repeat password",-1),fe={class:"control"},ge={key:0,class:"notification is-danger"},_e=(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("button",{class:"button is-dark"},"Sign up")])],-1),ve=(0,s._)("hr",null,null,-1),we=(0,s.Uk)(" Or "),ye=(0,s.Uk)("click here"),be=(0,s.Uk)(" to log in! ");function ke(t,e,n,a,i,u){var c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",re,[(0,s._)("div",se,[(0,s._)("div",oe,[ae,(0,s._)("form",{onSubmit:e[3]||(e[3]=(0,r.iM)((function(){return u.submitForm&&u.submitForm.apply(u,arguments)}),["prevent"]))},[(0,s._)("div",ie,[ue,(0,s._)("div",ce,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=function(t){return i.username=t})},null,512),[[r.nr,i.username]])])]),(0,s._)("div",le,[de,(0,s._)("div",me,[(0,s.wy)((0,s._)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.password=t})},null,512),[[r.nr,i.password]])])]),(0,s._)("div",pe,[he,(0,s._)("div",fe,[(0,s.wy)((0,s._)("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.password2=t})},null,512),[[r.nr,i.password2]])])]),i.errors.length?((0,s.wg)(),(0,s.iD)("div",ge,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.errors,(function(t){return(0,s.wg)(),(0,s.iD)("p",{key:t},(0,o.zw)(t),1)})),128))])):(0,s.kq)("",!0),_e,ve,we,(0,s.Wm)(c,{to:"/log-in"},{default:(0,s.w5)((function(){return[ye]})),_:1}),be],32)])])])}const Ce={name:"SignUp",data:function(){return{username:"",password:"",password2:"",errors:[]}},methods:{submitForm:function(){var t=this;if(this.errors=[],""===this.username&&this.errors.push("The username is missing"),""===this.password&&this.errors.push("The password is too short"),this.password!==this.password2&&this.errors.push("The passwords doesn't match"),!this.errors.length){var e={username:this.username,password:this.password};I().post("/api/v1/users/",e).then((function(e){(0,_t.toast)({message:"Account created, please log in!",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"}),t.$router.push("/log-in")}))["catch"]((function(e){if(e.response){for(var n in e.response.data)t.errors.push("".concat(n,": ").concat(e.response.data[n]));console.log(JSON.stringify(e.response.data))}else e.message&&(t.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(e)))}))}}}},Se=(0,L.Z)(Ce,[["render",ke]]),Te=Se;var xe={class:"page-log-in"},qe={class:"columns"},ze={class:"column is-4 is-offset-4"},Ie=(0,s._)("h1",{class:"title"},"Log in",-1),Pe={class:"field"},Le=(0,s._)("label",null,"Username",-1),Oe={class:"control"},$e={class:"field"},De=(0,s._)("label",null,"Password",-1),Ze={class:"control"},Ue={key:0,class:"notification is-danger"},Me=(0,s._)("div",{class:"field"},[(0,s._)("div",{class:"control"},[(0,s._)("button",{class:"button is-dark"},"Log in")])],-1),Be=(0,s._)("hr",null,null,-1),Fe=(0,s.Uk)(" Or "),je=(0,s.Uk)("click here"),Ae=(0,s.Uk)(" to sign up! ");function He(t,e,n,a,i,u){var c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",xe,[(0,s._)("div",qe,[(0,s._)("div",ze,[Ie,(0,s._)("form",{onSubmit:e[2]||(e[2]=(0,r.iM)((function(){return u.submitForm&&u.submitForm.apply(u,arguments)}),["prevent"]))},[(0,s._)("div",Pe,[Le,(0,s._)("div",Oe,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=function(t){return i.username=t})},null,512),[[r.nr,i.username]])])]),(0,s._)("div",$e,[De,(0,s._)("div",Ze,[(0,s.wy)((0,s._)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.password=t})},null,512),[[r.nr,i.password]])])]),i.errors.length?((0,s.wg)(),(0,s.iD)("div",Ue,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.errors,(function(t){return(0,s.wg)(),(0,s.iD)("p",{key:t},(0,o.zw)(t),1)})),128))])):(0,s.kq)("",!0),Me,Be,Fe,(0,s.Wm)(c,{to:"/sign-up"},{default:(0,s.w5)((function(){return[je]})),_:1}),Ae],32)])])])}const Ve={name:"LogIn",data:function(){return{username:"",password:"",errors:[]}},mounted:function(){document.title="Log In | BBMC"},methods:{submitForm:function(){var t=this;return(0,V.Z)((0,H.Z)().mark((function e(){var n;return(0,H.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return I().defaults.headers.common.Authorization="",localStorage.removeItem("token"),n={username:t.username,password:t.password},e.next=5,I().post("/api/v1/token/login/",n).then((function(e){var n=e.data.auth_token;t.$store.commit("setToken",n),I().defaults.headers.common.Authorization="Token "+n,localStorage.setItem("token",n);var r=t.$route.query.to||"/cart";t.$router.push(r)}))["catch"]((function(e){if(e.response)for(var n in e.response.data)t.errors.push("".concat(n,": ").concat(e.response.data[n]));else t.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(e))}));case 5:case"end":return e.stop()}}),e)})))()}}},Ye=(0,L.Z)(Ve,[["render",He]]),Ee=Ye;var Ke={class:"page-my-account"},Ne={class:"columns is-multiline"},We=(0,s._)("div",{class:"column is-12"},[(0,s._)("h1",{class:"title"},"My account")],-1),Je={class:"column is-12"},Qe=(0,s._)("hr",null,null,-1),Re={class:"column is-12"},Ge=(0,s._)("h2",{class:"subtitle"},"My orders",-1);function Xe(t,e,n,r,o,a){var i=(0,s.up)("OrderSummary");return(0,s.wg)(),(0,s.iD)("div",Ke,[(0,s._)("div",Ne,[We,(0,s._)("div",Je,[(0,s._)("button",{onClick:e[0]||(e[0]=function(t){return a.logout()}),class:"button is-danger"},"Log out")]),Qe,(0,s._)("div",Re,[Ge,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.orders,(function(t){return(0,s.wg)(),(0,s.j4)(i,{key:t.id,order:t},null,8,["order"])})),128))])])])}var tn={class:"box mb-4"},en={class:"is-size-4 mb-6"},nn=(0,s._)("h4",{class:"is-size-5"},"Products",-1),rn={class:"table is-fullwidth"},sn=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Product"),(0,s._)("th",null,"Price"),(0,s._)("th",null,"Quantity"),(0,s._)("th",null,"Total")])],-1);function on(t,e,n,r,a,i){return(0,s.wg)(),(0,s.iD)("div",tn,[(0,s._)("h3",en,"Order #"+(0,o.zw)(n.order.id),1),nn,(0,s._)("table",rn,[sn,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.order.items,(function(t){return(0,s.wg)(),(0,s.iD)("tr",{key:t.product.id},[(0,s._)("td",null,(0,o.zw)(t.product.name),1),(0,s._)("td",null,"₱"+(0,o.zw)(t.product.price),1),(0,s._)("td",null,(0,o.zw)(t.quantity),1),(0,s._)("td",null,"₱"+(0,o.zw)(i.getItemTotal(t).toFixed(2)),1)])})),128))])])])}const an={name:"OrderSummary",props:{order:Object},methods:{getItemTotal:function(t){return t.quantity*t.product.price},orderTotalLength:function(t){return t.items.reduce((function(t,e){return t+e.quantity}),0)}}},un=(0,L.Z)(an,[["render",on]]),cn=un,ln={name:"MyAccount",components:{OrderSummary:cn},data:function(){return{orders:[]}},mounted:function(){document.title="My account | BBMC",this.getMyOrders()},methods:{logout:function(){I().defaults.headers.common.Authorization="",localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userid"),this.$store.commit("removeToken"),this.$router.push("/")},getMyOrders:function(){var t=this;return(0,V.Z)((0,H.Z)().mark((function e(){return(0,H.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),e.next=3,I().get("/api/v1/orders/").then((function(e){t.orders=e.data}))["catch"]((function(t){console.log(t)}));case 3:t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}},dn=(0,L.Z)(ln,[["render",Xe]]),mn=dn;var pn={class:"page-checkout"},hn={class:"columns is-multiline"},fn=(0,s._)("div",{class:"column is-12"},[(0,s._)("h1",{class:"title"},"Checkout")],-1),gn={class:"column is-12 box"},_n={class:"table is-fullwidth"},vn=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Product"),(0,s._)("th",null,"Price"),(0,s._)("th",null,"Quantity"),(0,s._)("th",null,"Total")])],-1),wn=(0,s._)("td",{colspan:"2"},"Total",-1),yn={class:"column is-12 box"},bn=(0,s._)("h2",{class:"subtitle"},"Shipping details",-1),kn=(0,s._)("p",{class:"has-text-grey mb-4"},"* All fields are required",-1),Cn={class:"columns is-multiline"},Sn={class:"column is-6"},Tn={class:"field"},xn=(0,s._)("label",null,"First name*",-1),qn={class:"control"},zn={class:"field"},In=(0,s._)("label",null,"Last name*",-1),Pn={class:"control"},Ln={class:"field"},On=(0,s._)("label",null,"E-mail*",-1),$n={class:"control"},Dn={class:"field"},Zn=(0,s._)("label",null,"Phone*",-1),Un={class:"control"},Mn={class:"column is-6"},Bn={class:"field"},Fn=(0,s._)("label",null,"Address*",-1),jn={class:"control"},An={class:"field"},Hn=(0,s._)("label",null,"Zip code*",-1),Vn={class:"control"},Yn={class:"field"},En=(0,s._)("label",null,"Place*",-1),Kn={class:"control"},Nn={key:0,class:"notification is-danger mt-4"},Wn=(0,s._)("hr",null,null,-1),Jn=(0,s._)("div",{id:"card-element",class:"mb-5"},null,-1),Qn=(0,s._)("hr",null,null,-1);function Rn(t,e,n,a,i,u){return(0,s.wg)(),(0,s.iD)("div",pn,[(0,s._)("div",hn,[fn,(0,s._)("div",gn,[(0,s._)("table",_n,[vn,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.cart.items,(function(t){return(0,s.wg)(),(0,s.iD)("tr",{key:t.product.id},[(0,s._)("td",null,(0,o.zw)(t.product.name),1),(0,s._)("td",null,"₱"+(0,o.zw)(t.product.price),1),(0,s._)("td",null,(0,o.zw)(t.quantity),1),(0,s._)("td",null,"₱"+(0,o.zw)(u.getItemTotal(t).toFixed(2)),1)])})),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[wn,(0,s._)("td",null,(0,o.zw)(u.cartTotalLength),1),(0,s._)("td",null,"₱"+(0,o.zw)(u.cartTotalPrice.toFixed(2)),1)])])])]),(0,s._)("div",yn,[bn,kn,(0,s._)("div",Cn,[(0,s._)("div",Sn,[(0,s._)("div",Tn,[xn,(0,s._)("div",qn,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=function(t){return i.first_name=t})},null,512),[[r.nr,i.first_name]])])]),(0,s._)("div",zn,[In,(0,s._)("div",Pn,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.last_name=t})},null,512),[[r.nr,i.last_name]])])]),(0,s._)("div",Ln,[On,(0,s._)("div",$n,[(0,s.wy)((0,s._)("input",{type:"email",class:"input","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.email=t})},null,512),[[r.nr,i.email]])])]),(0,s._)("div",Dn,[Zn,(0,s._)("div",Un,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[3]||(e[3]=function(t){return i.phone=t})},null,512),[[r.nr,i.phone]])])])]),(0,s._)("div",Mn,[(0,s._)("div",Bn,[Fn,(0,s._)("div",jn,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[4]||(e[4]=function(t){return i.address=t})},null,512),[[r.nr,i.address]])])]),(0,s._)("div",An,[Hn,(0,s._)("div",Vn,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[5]||(e[5]=function(t){return i.zipcode=t})},null,512),[[r.nr,i.zipcode]])])]),(0,s._)("div",Yn,[En,(0,s._)("div",Kn,[(0,s.wy)((0,s._)("input",{type:"text",class:"input","onUpdate:modelValue":e[6]||(e[6]=function(t){return i.place=t})},null,512),[[r.nr,i.place]])])])])]),i.errors.length?((0,s.wg)(),(0,s.iD)("div",Nn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.errors,(function(t){return(0,s.wg)(),(0,s.iD)("p",{key:t},(0,o.zw)(t),1)})),128))])):(0,s.kq)("",!0),Wn,Jn,u.cartTotalLength?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[Qn,(0,s._)("button",{class:"button is-dark",onClick:e[7]||(e[7]=function(){return u.submitForm&&u.submitForm.apply(u,arguments)})},"Pay with Stripe")],64)):(0,s.kq)("",!0)])])])}const Gn={name:"Checkout",data:function(){return{cart:{items:[]},stripe:{},card:{},first_name:"",last_name:"",email:"",phone:"",address:"",zipcode:"",place:"",errors:[]}},mounted:function(){if(document.title="Checkout | BBMC",this.cart=this.$store.state.cart,this.cartTotalLength>0){this.stripe=Stripe("pk_test_51H1HiuKBJV2qfWbD2gQe6aqanfw6Eyul5PO2KeOuSRlUMuaV4TxEtaQyzr9DbLITSZweL7XjK3p74swcGYrE2qEX00Hz7GmhMI");var t=this.stripe.elements();this.card=t.create("card",{hidePostalCode:!0}),this.card.mount("#card-element")}},methods:{getItemTotal:function(t){return t.quantity*t.product.price},submitForm:function(){var t=this;this.errors=[],""===this.first_name&&this.errors.push("The first name field is missing!"),""===this.last_name&&this.errors.push("The last name field is missing!"),""===this.email&&this.errors.push("The email field is missing!"),""===this.phone&&this.errors.push("The phone field is missing!"),""===this.address&&this.errors.push("The address field is missing!"),""===this.zipcode&&this.errors.push("The zip code field is missing!"),""===this.place&&this.errors.push("The place field is missing!"),this.errors.length||(this.$store.commit("setIsLoading",!0),this.stripe.createToken(this.card).then((function(e){e.error?(t.$store.commit("setIsLoading",!1),t.errors.push("Something went wrong with Stripe. Please try again"),console.log(e.error.message)):t.stripeTokenHandler(e.token)})))},stripeTokenHandler:function(t){var e=this;return(0,V.Z)((0,H.Z)().mark((function n(){var r,s,o,a,i;return(0,H.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(r=[],s=0;s<e.cart.items.length;s++)o=e.cart.items[s],a={product:o.product.id,quantity:o.quantity,price:o.product.price*o.quantity},r.push(a);return i={first_name:e.first_name,last_name:e.last_name,email:e.email,address:e.address,zipcode:e.zipcode,place:e.place,phone:e.phone,items:r,stripe_token:t.id},n.next=5,I().post("/api/v1/checkout/",i).then((function(t){e.$store.commit("clearCart"),e.$router.push("/cart/success")}))["catch"]((function(t){e.errors.push("Something went wrong. Please try again"),console.log(t)}));case 5:e.$store.commit("setIsLoading",!1);case 6:case"end":return n.stop()}}),n)})))()}},computed:{cartTotalPrice:function(){return this.cart.items.reduce((function(t,e){return t+e.product.price*e.quantity}),0)},cartTotalLength:function(){return this.cart.items.reduce((function(t,e){return t+e.quantity}),0)}}},Xn=(0,L.Z)(Gn,[["render",Rn]]),tr=Xn;var er={class:"page-success"},nr=(0,s._)("div",{class:"columns is-multiline"},[(0,s._)("div",{class:"column is-12"},[(0,s._)("h1",{class:"title"},"Thank you"),(0,s._)("p",null,"Your order will be processed within 48 hours")])],-1),rr=[nr];function sr(t,e,n,r,o,a){return(0,s.wg)(),(0,s.iD)("div",er,rr)}const or={name:"Success",mounted:function(){document.title="Success | BBMC"}},ar=(0,L.Z)(or,[["render",sr]]),ir=ar;var ur=[{path:"/",name:"Home",component:rt},{path:"/about",name:"About",component:function(){return n.e(443).then(n.bind(n,5834))}},{path:"/sign-up",name:"SignUp",component:Te},{path:"/log-in",name:"LogIn",component:Ee},{path:"/my-account",name:"MyAccount",component:mn,meta:{requireLogin:!0}},{path:"/search",name:"Search",component:Mt},{path:"/cart",name:"Cart",component:ne},{path:"/cart/success",name:"Success",component:ir},{path:"/cart/checkout",name:"Checkout",component:tr,meta:{requireLogin:!0}},{path:"/:category_slug/:product_slug",name:"Product",component:yt},{path:"/:category_slug",name:"Category",component:zt}],cr=(0,D.p7)({history:(0,D.PO)("/"),routes:ur});cr.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requireLogin}))&&!U.state.isAuthenticated?n({name:"LogIn",query:{to:t.path}}):n()}));const lr=cr;I().defaults.baseURL="http://localhost:8000",(0,r.ri)($).use(U).use(lr,I()).mount("#app")}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,(()=>{var t=[];n.O=(e,r,s,o)=>{if(!r){var a=1/0;for(l=0;l<t.length;l++){for(var[r,s,o]=t[l],i=!0,u=0;u<r.length;u++)(!1&o||a>=o)&&Object.keys(n.O).every((t=>n.O[t](r[u])))?r.splice(u--,1):(i=!1,o<a&&(a=o));if(i){t.splice(l--,1);var c=s();void 0!==c&&(e=c)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[r,s,o]}})(),(()=>{n.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return n.d(e,{a:e}),e}})(),(()=>{n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[]))})(),(()=>{n.u=t=>"js/about.73ce5c91.js"})(),(()=>{n.miniCssF=t=>{}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={},e="frontend:";n.l=(r,s,o,a)=>{if(t[r])t[r].push(s);else{var i,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+o){i=d;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",e+o),i.src=r),t[r]=[s];var m=(e,n)=>{i.onerror=i.onload=null,clearTimeout(p);var s=t[r];if(delete t[r],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((t=>t(n))),e)return e(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),u&&document.head.appendChild(i)}}})(),(()=>{n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{n.p="/"})(),(()=>{var t={143:0};n.f.j=(e,r)=>{var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)r.push(s[2]);else{var o=new Promise(((n,r)=>s=t[e]=[n,r]));r.push(s[2]=o);var a=n.p+n.u(e),i=new Error,u=r=>{if(n.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",i.name="ChunkLoadError",i.type=o,i.request=a,s[1](i)}};n.l(a,u,"chunk-"+e,e)}},n.O.j=e=>0===t[e];var e=(e,r)=>{var s,o,[a,i,u]=r,c=0;if(a.some((e=>0!==t[e]))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(u)var l=u(n)}for(e&&e(r);c<a.length;c++)o=a[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(l)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=n.O(void 0,[998],(()=>n(8679)));r=n.O(r)})();
//# sourceMappingURL=app.b210ac2a.js.map